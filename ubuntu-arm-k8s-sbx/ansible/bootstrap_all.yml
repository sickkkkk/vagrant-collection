---
- name: Prepare nodes for k8s setup
  hosts: all
  become: yes
  roles:
    - role: k8s_baseline

- name: Bootstrap RKE2 Server
  hosts: master_nodes
  become: yes
  roles:
    - role: k8s_rke2_server 

- name: Bootstrap Cilium across master nodes
  hosts: master_nodes
  become: yes
  roles:
    - role: k8s_rke2_cilium

- name: Bootstrap RKE2 node
  hosts: worker_nodes
  become: yes
  roles:
    - role: k8s_rke2_nodes